<!DOCTYPE html>
<html>
<head>
  <title>Fotocabina Boda</title>
  <style>
    body { font-family: sans-serif; text-align: center; }
    video, canvas { width: 90%; max-width: 400px; border-radius: 12px; }
    button { padding: 12px 20px; margin-top: 15px; font-size: 18px; }
  </style>
</head>
<body>

<h2>üì∏ Fotocabina - Boda</h2>

<video id="video" autoplay></video>
<canvas id="canvas" style="display:none;"></canvas>

<button id="btn">Tomar Foto</button>

<p id="msg"></p>

<script>
const video = document.getElementById("video");
const canvas = document.getElementById("canvas");
const btn = document.getElementById("btn");
const msg = document.getElementById("msg");

// Abrir c√°mara
navigator.mediaDevices.getUserMedia({ video: true })
  .then(stream => video.srcObject = stream)
  .catch(err => alert("Error abriendo c√°mara: " + err));

btn.onclick = async () => {
  const ctx = canvas.getContext("2d");
  canvas.width = video.videoWidth;
  canvas.height = video.videoHeight;
  ctx.drawImage(video, 0, 0);

  // Convertir a Base64
  const dataURL = canvas.toDataURL("image/jpeg").replace(/^data:image\/jpeg;base64,/, "");

  msg.textContent = "Guardando...";

  // Enviar al backend
  const res = await fetch("AQUI_TU_URL_DE_APPS_SCRIPT", {
    method: "POST",
    body: dataURL
  });

  msg.textContent = res.ok ? "‚úÖ Foto guardada" : "‚ùå Error guardando";
};
</script>

</body>
</html>
